<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Web Testing Agent</title>

    <!-- Flask Static CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>

<div class="container">
    <div class="header">
        <h1>AI Web Testing Agent</h1>
        <p>Test websites automatically using natural language</p>
    </div>

    <label for="instruction">Test Instruction</label>
    <textarea id="instruction" rows="4"
        placeholder="Example: Verify login page shows error for invalid email"></textarea>

    <button onclick="send()">Run Test</button>

    <div class="output-container">
        <h3>Agent Response</h3>
        <pre id="output">Waiting for instruction...</pre>
    </div>

    <footer>
        Powered by Flask • LangGraph • Playwright
    </footer>
</div>

<script>
    function send() {
        const instruction = document.getElementById("instruction").value;
        document.getElementById("output").innerText = "Processing...";

        fetch("/test", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ instruction })
        })
        .then(res => res.json())
        .then(data => {
            document.getElementById("output").innerText =
                JSON.stringify(data, null, 2);
        })
        .catch(err => {
            document.getElementById("output").innerText =
                "Error: " + err;
        });
    }
</script>

</body>
</html>
